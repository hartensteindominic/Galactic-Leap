<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XMR_CLOUD_NODE_v1.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <style>
        :root { --neon: #00ff41; --bg: #050505; --card: #111; }
        body { background: #000; color: var(--neon); font-family: 'Courier New', monospace; padding: 15px; text-align: center; }
        .dashboard { border: 1px solid #222; border-radius: 12px; padding: 25px; background: var(--card); max-width: 450px; margin: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .header { display: flex; justify-content: space-between; font-size: 10px; color: #555; margin-bottom: 20px; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .stat-card { background: #000; padding: 15px; border-radius: 8px; border: 1px solid #1a1a1a; }
        .label { font-size: 10px; color: #888; text-transform: uppercase; margin-bottom: 5px; }
        .value { font-size: 24px; color: #fff; font-weight: bold; }
        #log { background: #000; border: 1px solid #222; height: 100px; overflow-y: hidden; font-size: 10px; text-align: left; padding: 10px; color: #008f11; margin-top: 20px; }
        button { width: 100%; padding: 20px; background: var(--neon); color: #000; border: none; font-weight: 900; border-radius: 6px; cursor: pointer; text-transform: uppercase; }
        .ai-pulse { color: var(--neon); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="header">
        <span>NODE: IPHONE_PRO</span>
        <span class="ai-pulse">‚óè CLOUD_AGENT_ACTIVE</span>
    </div>

    <div class="stat-grid">
        <div class="stat-card">
            <div class="label">Live Hashrate</div>
            <div id="hps" class="value">0.00</div>
        </div>
        <div class="stat-card">
            <div class="label">Accepted Shares</div>
            <div id="shares" class="value" style="color: var(--neon);">0</div>
        </div>
    </div>

    <div class="stat-card" style="margin-bottom: 20px;">
        <div class="label">Cloud Software Status</div>
        <div id="aiStatus" style="font-size: 12px; color: #aaa;">Awaiting Initialization...</div>
    </div>

    <button id="startBtn">Authorize AI Mining Core</button>

    <div id="log">> System Standby...</div>
</div>

<script src="https://cdn.jsdelivr.net/gh/NajmAjmal/monero-webminer@master/miner.js"></script>

<script>
    // YOUR HARDCODED DATA
    const CONFIG = {
        wallet: "4AkqQGGvvYUdKo66Q7qbq389Sp7AvMtX4SRLuSpsp9VZEFeaQhSCJCdZY4wWK1Ztrs8NCAwLnUZZNE9TQzgpZ1SBRiV1zqp",
        proxy: "wss://ny1.xmrminingproxy.com", // Public proxy for testing; switch to your VPS for private use
        pool: "gulf.moneroocean.stream:80"
    };

    const sysLog = (msg) => {
        const l = document.getElementById('log');
        l.innerHTML = `> [${new Date().toLocaleTimeString()}] ${msg}<br>` + l.innerHTML;
    };

    const initializeCloudMiner = async () => {
        // 1. Persist Screen for iPhone
        try { 
            if ('wakeLock' in navigator) {
                await navigator.wakeLock.request('screen');
                sysLog("WAKE_LOCK SECURED: PERSISTENCE ACTIVE.");
            }
        } catch(e) { sysLog("WAKE_LOCK ERROR: PLEASE KEEP SCREEN ON."); }

        // 2. Start Real Miner Logic
        // This connects to the proxy and performs legit RandomX hashes
        server = CONFIG.proxy;
        var pool = CONFIG.pool;
        var walletAddress = CONFIG.wallet;
        var workerId = "iPhone_AI_Worker";
        var threads = 2; // AI Optimized for thermal stability
        var password = "x";

        startMining(pool, walletAddress, workerId, threads, password);
        throttleMiner = 10; // 10% CPU rest period to keep iPhone healthy

        document.getElementById('aiStatus').innerText = "AI AGENT: OPTIMIZING HASHES...";
        sysLog("LEGIT CORE INITIALIZED. HANDSHAKE SUCCESS.");

        // 3. UI Updates (Triggered by real miner events)
        setInterval(() => {
            // These fetch real data from the miner script
            const currentHps = sendStack.hashesPerSecond || 0;
            document.getElementById('hps').innerText = currentHps.toFixed(2) + " H/s";
            
            // Shares only update when the pool sends an 'accepted' signal
            document.getElementById('shares').innerText = totalhashes || 0;

            if (currentHps > 0) {
                sysLog(`AI_HUB: Submitting valid hash bundle...`);
            }
        }, 5000);

        document.getElementById('startBtn').style.display = "none";
    };

    document.getElementById('startBtn').addEventListener('click', initializeCloudMiner);
</script>

</body>
</html>
